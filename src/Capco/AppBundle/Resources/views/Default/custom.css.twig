{# Basics #}

{% set mainBg = capco_site_color_value('color.body.bg') %}
{% if null == mainBg %}{% set mainBg = '#FFF' %}{% endif %}
{% set mainText = capco_site_color_value('color.body.text') %}
{% if null == mainText %}{% set mainText = '#333' %}{% endif %}

{% set btnPrimary = capco_site_color_value('color.btn.primary.bg') %}
{% if null == btnPrimary %}{% set btnPrimary = '#1abc9c' %}{% endif %}
{% set btnPrimaryText = capco_site_color_value('color.btn.primary.text') %}
{% if null == btnPrimaryText %}{% set btnPrimaryText = '#FFF' %}{% endif %}
{% set bgPrimary = capco_site_color_value('color.bg.primary') %}
{% if null == bgPrimary %}{% set bgPrimary = '#e3e3e3' %}{% endif %}

{% set btnGhostBase = capco_site_color_value('color.btn.ghost.base') %}
{% if null == btnGhostBase %}{% set btnGhostBase = '#1abc9c' %}{% endif %}
{% set btnGhostHover = capco_site_color_value('color.btn.ghost.hover') %}
{% if null == btnGhostHover %}{% set btnGhostHover = '#fff' %}{% endif %}

{% set link = capco_site_color_value('color.link.default') %}
{% if null == link %}{% set link = '#16a085' %}{% endif %}
{% set linkHover = capco_site_color_value('color.link.hover') %}
{% if null == linkHover %}{% set linkHover = '#1abc9c' %}{% endif %}

{# Titles #}

{% set h1 = capco_site_color_value('color.h1') %}
{% set h2 = capco_site_color_value('color.h2') %}
{% set h3 = capco_site_color_value('color.h3') %}
{% set h4 = capco_site_color_value('color.h4') %}
{% set h5 = capco_site_color_value('color.h5') %}
{% set h6 = capco_site_color_value('color.h6') %}

{# Main menu #}	

{% set menuBg = capco_site_color_value('color.main_menu.bg') %}	
{% if null == menuBg %}{% set menuBg = '#ebebeb' %}{% endif %}	
{% set menuBgHover = capco_site_color_value('color.main_menu.bg_active') %}	
{% if null == menuBgHover %}{% set menuBgHover = '#e7e7e7' %}{% endif %}	
{% set menuText = capco_site_color_value('color.main_menu.text') %}	
{% if null == menuText %}{% set menuText = '#777' %}{% endif %}	
{% set menuTextHover = capco_site_color_value('color.main_menu.text_hover') %}	
{% if null == menuTextHover %}{% set menuTextHover = '#555' %}{% endif %}	
{% set menuTextActive = capco_site_color_value('color.main_menu.text_active') %}	
{% if null == menuTextActive %}{% set menuTextActive = '#555' %}{% endif %}	

{# Homepage #}

{% set homeHeaderBg = capco_site_color_value('color.home.bg') %}
{% if null == homeHeaderBg %}{% set homeHeaderBg = '#16A085' %}{% endif %}
{% set homeHeaderTitle = capco_site_color_value('color.home.title') %}
{% if null == homeHeaderTitle %}{% set homeHeaderTitle = '#FFF' %}{% endif %}

{% set btn = capco_site_color_value('color.btn.bg') %}
{% if null == btn %}{% set btn = '#1ABC9C' %}{% endif %}
{% set btnText = capco_site_color_value('color.btn.text') %}
{% if null == btnText %}{% set btnText = '#FFF' %}{% endif %}

{% set jumbontronMargin = capco_site_parameter_value('homepage.jumbotron.margin') %}

{# Headers (else than homepage) #}

{% set headerBg = capco_site_color_value('color.header.bg') %}
{% if null == headerBg %}{% set headerBg = '#16A085' %}{% endif %}
{% set headerTitle = capco_site_color_value('color.header.title') %}
{% if null == headerTitle %}{% set headerTitle = '#FFF' %}{% endif %}
{% set headerText = capco_site_color_value('color.header.text') %}
{% if null == headerText %}{% set headerText = '#FFF' %}{% endif %}

{% set header2Bg = capco_site_color_value('color.header2.bg') %}
{% set header2Text = capco_site_color_value('color.header2.text') %}
{% set header2Title = capco_site_color_value('color.header2.title') %}

{# Sections #}

{% set sectionBg = capco_site_color_value('color.section.bg') %}
{% if null == sectionBg %}{% set sectionBg = '#ebebeb' %}{% endif %}
{% set sectionText = capco_site_color_value('color.section.text') %}
{% if null == sectionText %}{% set sectionText = '#000' %}{% endif %}

{# Footer #}

{% set footerTitle = capco_site_color_value('color.footer.title') %}
{% if null == footerTitle %}{% set footerTitle = '#FFF' %}{% endif %}
{% set footerText = capco_site_color_value('color.footer.text') %}
{% if null == footerText %}{% set footerText = '#FFF' %}{% endif %}
{% set footerBg = capco_site_color_value('color.footer.bg') %}
{% if null == footerBg %}{% set footerBg = '#1abc9c' %}{% endif %}

{% set footer2Text = capco_site_color_value('color.footer2.text') %}
{% if null == footer2Text %}{% set footer2Text = '#FFF' %}{% endif %}
{% set footer2Bg = capco_site_color_value('color.footer2.bg') %}
{% if null == footer2Bg %}{% set footer2Bg = '#16a085' %}{% endif %}

{# VIP user #}
{% set vipBg = capco_site_color_value('color.user.vip.bg') %}

{# Proposal votes widget #}
{% set votesWidgetBg = capco_site_color_value('color.votes_bar.bg') | default('#F6F6F6') %}
{% set votesWidgetText = capco_site_color_value('color.votes_bar.text') | default('#707070') %}
{% set votesWidgetBorder = capco_site_color_value('color.votes_bar.border') | default('#E3E3E3') %}
{% set votesWidgetBtnBg = capco_site_color_value('color.votes_bar.btn.bg') | default('#FFFFFF') %}
{% set votesWidgetBtnText = capco_site_color_value('color.votes_bar.btn.text') | default('#000000') %}

<style>
    a,
    .btn.btn-link {
        color: {{ link | raw }};
    }
    .externalLinkSvg {
      fill: {{ link | raw }};
    }

    a .proposal__title {
        color: {{ link | raw }};
    }

    a span.badge {
        background-color: {{ link | raw }};
    }

    .select__option button:hover, .select__option button:focus {
        background-color: {{ btnPrimary | raw }};
    }

    a:hover,
    a:focus,
    .opinion .opinion__body .opinion__title a:hover,
    .opinion .opinion__body .opinion__user a:hover,
    .list-group-item__opinion .title a:hover,
    .list-group-item__opinion .author-name:hover,
    .btn.btn-link:hover,
    .btn.btn-link:active,
    .btn.btn-link.active {
        color: {{ linkHover | raw }};
    }

    a:hover .proposal__title {
        color: {{ linkHover | raw }};
    }


    .opinion__header .opinion__header__title,
    .opinion__header .opinion__header__back {
        color: black;
    }

    .opinion .opinion__body .opinion__title a,
    .opinion .opinion__body .opinion__user a,
    .list-group-item__opinion .author-name {
        color: {{ link | raw }};
    }

    .dialog__header .dialog__title {
        color: black;
    }

    .navbar--sub .nav li.active a,
    .navbar--sub .nav li.active:hover a {
        border-color: {{ btnPrimary | raw }};
    }

    .navbar--sub .nav li.trash__step.active > div,
    .navbar--sub .nav li.trash__step.active:hover > div {
        border-color: {{ btnPrimary | raw }};
    }

    .navbar--sub .navbar__step-nb {
        color: {{ btnPrimary | raw }};
    }

    .step-tabs__list ul li.active .navbar__step-nb {
        background-color: {{ btnPrimary | raw }};
        border-color: {{ btnPrimary | raw }};
    }

    .step-tabs__list ul li.active a {
        border-bottom-color: {{ btnPrimary | raw }};
    }

    .status--primary, .custom-primary-bgcolor {
        background-color: {{ btnPrimary | raw }};
    }

    @media (max-width: 767px ) {
        .step-tabs__list ul li.active .navbar__step-title,
        .step-tabs__list ul li.active .navbar__step-nb_small {
            color: {{ btnPrimary | raw }};
        }
    }

    @media (max-width: 991px ) {
        .stacked-nav__header, .consultation-plan_close .btn-link {
            background-color: {{ btnPrimary | raw }};
        }
    }

    .nb--highlighted {
        color: {{ btnPrimary | raw }};
    }

    #highlights .carousel-indicators li.active,
    #highlights .carousel-indicators li:hover {
        background-color: {{ bgPrimary | raw }};
    }

    .developers__container .list-group > .list-group-item:hover {
        color: {{ linkHover | raw }};
    }

    .developers__container .nav-tabs li.active a,
    .developers__container .nav-tabs li.active a:hover {
        border-bottom: 1px solid {{ link | raw }};
    }

    .counters-nav li .value {
        color: {{ btnPrimary | raw }};
    }

    .counters-nav > li > a:hover .category {
        color: {{ linkHover | raw }};
    }

    .nav-pills > li + li {
        margin-left: 0;
    }

    .opinion .ranking__nb {
        color: {{ btnPrimary | raw }};
    }

    .read-more-trigger {
        color: {{ link | raw }};
    }

    .read-more-trigger:hover {
        color: {{ linkHover | raw }};
    }

    .pagination > li > a,
    .pagination > li > a:hover,
    .pagination > li > a:focus,
    .pagination > li > span,
    .pagination > li > span:hover,
    .pagination > li > span:focus {
        color: {{ btnPrimary | raw }};
    }

    .pagination >.active > a,
    .pagination >.active > a:focus,
    .pagination >.active > a:hover,
    .pagination >.active > span,
    .pagination >.active > span:focus,
    .pagination >.active > span:hover {
        background-color: {{ btnPrimary | raw }};
        border-color: {{ btnPrimary | raw }};
        color: {{ btnPrimaryText | raw }};
    }

    .dropdown-menu>.active > a,
    .dropdown-menu>.active > a:focus,
    .dropdown-menu>.active > a:hover {
        background-color: {{ btnPrimary | raw }};
    }

    .profile .profile__value a:hover,
    .profile .profile__value.active a,
    .profile .profile__value.active a:hover {
        -moz-box-shadow: 0 -3px 0 {{ link | raw }} inset;
        -webkit-box-shadow: 0 -3px 0 {{ link | raw }} inset;
        box-shadow: 0 -3px 0 {{ link | raw }} inset;
    }

    .tabs__pills .tabs__pill a:hover,
    .tabs__pills .tabs__pill.active a,
    .tabs__pills .tabs__pill.active a:hover {
        -moz-box-shadow: 0 -3px 0 {{ link | raw }} inset;
        -webkit-box-shadow: 0 -3px 0 {{ link | raw }} inset;
        box-shadow: 0 -3px 0 {{ link | raw }} inset;
    }

    .settings__nav.nav-pills > li.active > a,
    .settings__nav.nav-pills > li.active > a:focus,
    .settings__nav.nav-pills > li.active > a:hover {
        color: {{ headerText | raw }};
        background-color: {{ headerBg | raw }};
    }

    .btn-primary,
    .btn-primary:not(.btn--outline),
    .btn-primary:not(.btn--outline):hover {
        color: {{ btnPrimaryText | raw }};
        background-color: {{ btnPrimary | raw }};
        border-color: {{ btnPrimary | raw }};
    }

    .btn--outline.btn-primary {
        color: {{ btnGhostBase | raw }};
        background-color: transparent;
        border-color: {{ btnGhostBase | raw }};
    }

    .btn--outline.btn-primary:hover {
        color: {{ btnGhostHover | raw }};
        background-color: {{ btnGhostBase | raw }};
        border-color: {{ btnGhostHover | raw }};
    }

    .btn-primary:hover {
        color: {{ btnPrimary | raw }};
        background-color: {{ btnPrimaryText | raw }};
        border-color: {{ btnPrimary | raw }};
    }

    .carousel-sidebar .nav > li > a {
        color: {{ link | raw }};
    }

    .carousel-sidebar .nav > li > a:hover {
        color: {{ linkHover | raw }};
    }
    .carousel-sidebar .nav > li.active > a,
    .carousel-sidebar .nav > li.active:focus > a {
        color: {{ linkHover | raw }};
        border-left-color: {{ btnPrimary | raw }};
    }

    .btn-primary.active,
    .btn-primary:active,
    .btn-primary:focus,
    .btn-primary:hover,
    .open > .btn-primary.dropdown-toggle {
        background-color: {{ btnPrimary | raw }};
        border-color: {{ btnPrimary | raw }};
        color: {{ btnPrimaryText | raw }};
    }

    h1, .h1 { color: {{ h1 | default('inherit') | raw }};}
    h2, .h2 { color: {{ h2 | default('inherit') | raw }};}
    h3, .h3 { color: {{ h3 | default('inherit') | raw }};}
    h4, .h4 { color: {{ h4 | default('inherit') | raw }};}
    h5, .h5 { color: {{ h5 | default('inherit') | raw }};}
    h6, .h6 { color: {{ h6 | default('inherit') | raw }};}

    .main {
        background-color: {{ mainBg | raw }};
        color:{{ mainText | raw }};
    }
    .jumbotron--bg-1 {
        background-color: {{ headerBg | raw }};
        color: {{ headerText | raw }};
    }

    .jumbotron--bg-1 .btn--outline {
        border-color: {{ btnText | raw }};
        color: {{ btnText | raw }};
    }

    .jumbotron--bg-1 .btn--outline:hover,
    .jumbotron--bg-1 .btn--outline:focus,
    .jumbotron--bg-1 .btn--outline:active {
        background-color: {{ btn | raw }};
        border-color: {{ btn | raw }};
        color: {{ btnText | raw }};
    }

    .footer h2 {
        color: {{ footerTitle | raw }};
    }

    .footer {
        background-color: {{ footerBg | raw }};
    }

    .footer,
    .footer a,
    .footer a:hover,
    .footer a:focus,
    .footer .footer__links .btn-link,
    .footer .footer__body a,
    .footer .social-network li a {
        color: {{ footerText | raw }};
        font-size: 16px;
    }

    .jumbotron--bg-1 h1{
        color: {{ headerTitle | raw }};
    }

    .footer .footer__links h1,
    .footer .footer__links h2,
    .footer .footer__links h3,
    .footer .footer__links h4,
    .footer .footer__links h5,
    .footer .footer__links,
    .footer .footer__links .btn-link,
    .footer .footer__links ul li,
    .footer .footer__links ul li a,
    .footer .capco-powered a:hover {
        background-color: {{ footer2Bg | raw }};
        color: {{ footer2Text | raw }};
    }

    body {
        background-color: {{ footer2Bg | raw }};
    }

    .section--alt,
    .main .section--custom:nth-of-type(odd) {
        color: {{ sectionText | raw }};
    }

    .tabs__container .tabs {
        background: {{ sectionBg | raw }};
    }

    .section--alt,
    .main .section--custom:nth-of-type(odd)  {
        background-color: {{ sectionBg | raw }};
    }

    .avatar, .default-avatar-group, .default-avatar, .default-image {
        background-color: {{ btnPrimary | raw }};
    }

    {% if header2Text is not null %}
        .main .section--header {
            color: {{ header2Text | raw }} !important;
        }
    {% endif %}

    {% if header2Bg is not null %}
        .main .section--header {
            background-color: {{ header2Bg | raw }} !important;
        }
    {% endif %}

    {% if header2Title is not null %}
        .section--header h1,
        .section--header h2,
        .section--header h3,
        .section--header h4,
        .section--header h5 {
            color: {{ header2Title | raw }};
        }
        .section--header h2 {
            border-bottom-color: {{ header2Title | raw }};
        }
    {% endif %}

    {% if header2Bg is not null %}
        .bg--project,
        .bg--theme,
        .bg--post {
            background-color: {{ btnPrimary | raw }};
        }
    {% endif %}


    .appendices__item h4 {
        color: {{ mainText | raw }}
    }

    {% if null != capco_site_image_media('image.header') and app.request.attributes.get('_route') == 'app_homepage' %}

        .jumbotron--bg-1{
            background-image: url({% path capco_site_image_media('image.header'), 'header_xs' %});
            background-position: 50% 50%;
            background-size: cover;
            padding: 0;
            margin: 0;
        }

        .header-img {
            padding: {{ jumbontronMargin | raw }}px 0 {{ jumbontronMargin | raw }}px;
            margin: 0;
            position: relative;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            {% if true == capco_site_parameter_value('homepage.jumbotron.darken') %}
                background-color: rgb(0, 0, 0);
                background-color: rgba(0, 0, 0, 0.6);
                filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
            {% endif %}
        }

        @media (min-width: 768px ) {
            .jumbotron--bg-1 {
                background-image: url({% path capco_site_image_media('image.header'), 'header_sm' %});
            }
            .header-img {
                padding: {{ jumbontronMargin | raw }}px 0 {{ jumbontronMargin | raw }}px;
            }
        }

        @media (min-width: 992px ) {
            .jumbotron--bg-1 {
                background-image: url({% path capco_site_image_media('image.header'), 'header_md' %});
            }
            .header-img {
                padding: {{ jumbontronMargin | raw }}px 0 {{ jumbontronMargin | raw }}px;
            }
        }

        @media (min-width: 1200px ) {
            .jumbotron--bg-1 {
                background-image: url({% path capco_site_image_media('image.header'), 'header' %});
            }
            .header-img {
                padding: {{ jumbontronMargin | raw }}px 0 {{ jumbontronMargin | raw }}px;
            }
        }

    {% endif %}


    #main-navbar,
    #main-navbar .dropdown-menu,
    #main-navbar .navbar-collapse {
        background-color: {{ menuBg | raw }};
        color: {{ menuText | raw }};
    }

    #main-navbar .navbar-nav > li > a,
    #main-navbar .dropdown-menu > li > a,
    #main-navbar .dropdown-menu > .nav-dropdown-section > li,
    #main-navbar .dropdown-menu > .nav-dropdown-section > li > a,
    #main-navbar a.navbar__search {
        color: {{ menuText | raw }};
    }

    #main-navbar .navbar-toggle {
        border-color: {{ menuText | raw }};
    }

    #main-navbar .navbar-toggle .icon-bar {
        background-color: {{ menuText | raw }};
    }

    #main-navbar .navbar-toggle:hover .icon-bar,
    #main-navbar .navbar-toggle:focus .icon-bar {
        background-color: {{ menuTextHover | raw }};
    }

    #main-navbar .navbar-nav > .active > a,
    #main-navbar .navbar-nav > .active > a:hover,
    #main-navbar .navbar-nav > .active > a:focus,
    #main-navbar .navbar-nav > .open > a,
    #main-navbar .navbar-nav > .open > a:hover,
    #main-navbar .navbar-nav > .open > a:focus,
    #main-navbar .dropdown-menu>.active > a,
    #main-navbar .dropdown-menu>.active > a:focus,
    #main-navbar .dropdown-menu>.active > a:hover,
    #main-navbar a.navbar__search.active {
        color: {{ menuTextActive | raw }};
        background-color: {{ menuBgHover | raw }};
    }

    #main-navbar .navbar-nav > li > a:hover,
    #main-navbar .navbar-nav > li > a:focus,
    #main-navbar .dropdown-menu > li > a:hover,
    #main-navbar .dropdown-menu > li > a:focus,
    #main-navbar .dropdown-menu > .nav-dropdown-section > li > a:hover,
    #main-navbar .dropdown-menu > .nav-dropdown-section > li > a:focus,
    #main-navbar .navbar-toggle:hover,
    #main-navbar .navbar-toggle:focus,
    #main-navbar a.navbar__search:hover,
    #main-navbar a.navbar__search:focus {
        color: {{ menuTextHover | raw }};
        background-color: {{ menuBgHover | raw }};
    }

    .btn--connection {
        background-color: {{ menuText | raw }} !important;
        color: {{ menuBg | raw }} !important;
        border-color: {{ menuBg | raw }} !important;
    }

    .search__choice-panel .radio label {
        color: {{ link | raw }};
    }

    .search__choice-panel .radio label:hover,
    .search__choice-panel .radio label:focus,
    .search__choice-panel .radio label:active,
    .search__choice-panel .radio label.active {
        color: {{ linkHover | raw }};
    }

    .home-page .jumbotron h1 {
        color: {{ homeHeaderTitle | raw }}
    }

    .home-page .jumbotron {
        background-color: {{ homeHeaderBg | raw }};
        {% if null == capco_site_image_media('image.header') and app.request.attributes.get('_route') == 'app_homepage' %}
            padding: {{ jumbontronMargin | raw }}px 0 {{ jumbontronMargin | raw }}px;
        {% endif %}
    }

    .proposal-vote__widget {
        border-color: {{ votesWidgetBorder | raw }};
        background-color: {{ votesWidgetBg | raw }};
    }

    .proposal-vote__widget .widget__counter {
        color: {{ votesWidgetText | raw }};
        border-right: 1px solid {{ votesWidgetBorder | raw }};
    }

    .proposal-vote__widget .widget__button {
        background-color: {{ votesWidgetBtnBg | raw }};
        color: {{ votesWidgetBtnText | raw }};
    }

    .opinion__votes__more__link {
        background-color: {{ btnPrimary | raw }};
        color: {{ btnPrimaryText | raw }};
    }

    .badge.badge-primary {
        background-color: {{ btnPrimary | raw }};
        color: {{ btnPrimaryText | raw }};
    }

    {% if null != vipBg %}
        .bg-vip,
        .bg-vip:hover,
        .bg-vip:focus {
            background-color: {{ vipBg | raw }} !important;
        }

        .main .section--custom.bg-vip {
            position: relative;
            background-color: {{ vipBg | raw }};
        }

        .bg-vip .smart-fade:after {
            background: linear-gradient(to right, rgba(255,255,255,0), {{ vipBg | raw }} 50%) !important;
        }
    {% endif %}
}

</style>
